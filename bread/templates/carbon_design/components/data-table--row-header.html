{% load carbon_design_tags %}
<!--
  Copyright IBM Corp. 2016, 2018

  This source code is licensed under the Apache-2.0 license found in the
  LICENSE file in the root directory of this source tree.
-->

  <!-- Table -->
  <table class="bx--data-table {% if truncate %}bx--data-table--overflow-truncate{% endif %}{% if sticky %} bx--data-table--sticky-header{% endif %}{% if zebra %} bx--data-table--zebra{% endif %}{% if small %} bx--data-table--compact{% endif %}{% if tall %} bx--data-table--tall{% endif %}{% if sort %} bx--data-table--sort{% endif %}{% if displayOverflowMenus %} bx--data-table--visible-overflow-menu{% endif %} {% if short %}bx--data-table--short{% endif %} {% if static %}bx--data-table--static{% endif %}" >
    <thead>
      <tr>
        {% for columns_i in columns %}
          <th {% if columns_i.checkbox %} class="{{ columns_i.root.prefix }}--table-column-checkbox" {% endif %}{% if columns_i.section %}class="{{ columns_i.root.prefix }}--table-expand"{% endif %} {% if columns_i.numerical %} class="{{ columns_i.root.prefix }}--data-table--numerical-cell"{% endif %} {% if columns_i.section %} data-event="expandAll"{% endif %}>
            <!-- checkbox th -->
            {% if columns_i.checkbox %}
              <input data-event="select-all" id="{{ columns_i.checkboxId }}" class="{{ columns_i.root.prefix }}--checkbox" type="checkbox" value="{{ columns_i.checkboxValue }}" name="{{ columns_i.checkboxName }}">
              <label for="{{ columns_i.checkboxId }}" class="{{ columns_i.root.prefix }}--checkbox-label" aria-label="{{ columns_i.title }}"></label>
            {% elif undefined %}
              <button class="{{ columns_i.root.prefix }}--table-expand__button">
                {% carbon_icon "ChevronRight16" class="bx--table-expand__svg" %}
              </button>
            {% elif undefined %}
            <!-- sortable th  -->
              {% if columns_i.sortable %}
                <button class="{{ columns_i.root.prefix }}--table-sort" data-event="sort" title="{{ columns_i.title }}">
                  <span class="{{ columns_i.root.prefix }}--table-header-label">{{ columns_i.title }}</span>
                  {% carbon_icon "ArrowDown16" class="bx--table-sort__icon" %}
                  {% carbon_icon "Arrows16" class="bx--table-sort__icon-unsorted" %}
                  {% if truncate %}
                    <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{ columns_i.root.prefix }}--tooltip" data-avoid-focus-on-open>
                      <span class="{{ columns_i.root.prefix }}--tooltip__caret"></span>
                      <p class="{{ columns_i.root.prefix }}--tooltip__text">{{ columns_i.title }}</p>
                    </div>
                  {% endif %}
                </button>
              <!-- no sort th -->
                {% elif columns_i.small %}
                  {{ columns_i.title }}
                {% else %}
                  <span class="{{ columns_i.root.prefix }}--table-header-label">{{ columns_i.title }}</span>
                {% endif %}
              {% endif %}
          </th>
        {% endfor %}
      </tr>
    </thead>
  <tbody>
    {% for row in rows %}
      <!-- the first cell of each row is a th[scope="row"], otherwise it is a td -->
      <tr{% if row.sectionContent %} class="{{ row.root.prefix }}--parent-row" data-parent-row {% endif %} {% if row.disabled %} class="{{ row.root.prefix }}--row-disabled" {% endif %}>
        {% for index, column in columns.items %}
          {% with data=row|lookup:column.name %}
            {% if data.first %}
              <th {% if column.numerical %} class="{{ data.root.prefix }}--data-table--numerical-cell" {% endif %} scope="row">
                <!-- truncated new markup -->
                {% if row.truncate %}
                  <span class="{{ data.root.prefix }}--table-cell-content" aria-describedby="label-tooltip">{{ data }}
                      {% if tall %}
                        {% if undefined %}
                        <div class="{{ data.root.prefix }}--data-table--cell-secondary-text">
                          {{ row.secondaryText }}
                        </div>
                        {% endif %}
                      {% endif %}
                    </span>
                  <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{ data.root.prefix }}--tooltip" data-avoid-focus-on-open>
                    <span class="{{ data.root.prefix }}--tooltip__caret"></span>
                    <p class="{{ data.root.prefix }}--tooltip__text">{{ data }}</p>
                  </div>
                <!-- default (non truncated) -->
                {% else %}
                  {{ data }}
                  {% if tall %}
                    {% if undefined %}
                    <div class="{{ data.root.prefix }}--data-table--cell-secondary-text">
                      {{ row.secondaryText }}
                    </div>
                    {% endif %}
                  {% endif %}
                {% endif %}
              </th>
            {% else %}
              <td {% if column.numerical %} class="{{ data.root.prefix }}--data-table--numerical-cell" {% endif %}>
                <!-- truncated new markup -->
                {% if row.truncate %}
                  <span class="{{ data.root.prefix }}--table-cell-content" aria-describedby="label-tooltip">{{ data }}
                      {% if tall %}
                        {% if undefined %}
                        <div class="{{ data.root.prefix }}--data-table--cell-secondary-text">
                          {{ row.secondaryText }}
                        </div>
                        {% endif %}
                      {% endif %}
                    </span>
                  <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{ data.root.prefix }}--tooltip" data-avoid-focus-on-open>
                    <span class="{{ data.root.prefix }}--tooltip__caret"></span>
                    <p class="{{ data.root.prefix }}--tooltip__text">{{ data }}</p>
                  </div>
                <!-- default (non truncated) -->
                {% else %}
                  {{ data }}
                  {% if tall %}
                    {% if undefined %}
                    <div class="{{ data.root.prefix }}--data-table--cell-secondary-text">
                      {{ row.secondaryText }}
                    </div>
                    {% endif %}
                  {% endif %}
                {% endif %}
              </td>
            {% endif %}
          {% endwith  %}
        {% endfor %}
      </tr>
      <!-- Expandable child row -->
      {% if row.sectionContent %}
          <tr class="{{ row.root.prefix }}--expandable-row {{ row.root.prefix }}--expandable-row--hidden" data-child-row>
            <td colspan="{{ columns.length }}">
              <div class="{{ row.root.prefix }}--child-row-inner-container">
                {{ row.sectionContent|safe }}
              </div>
            </td>
          </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
  {% if sticky %}
  </section>
  {% endif %}

 {% if undefined %}</div>{% endif %}


{% comment %}
Original handlebar template:

<!--
  Copyright IBM Corp. 2016, 2018

  This source code is licensed under the Apache-2.0 license found in the
  LICENSE file in the root directory of this source tree.
-->

  <!-- Table -->
  <table class="{{@root.prefix}}--data-table {{#if truncate}}{{@root.prefix}}--data-table--overflow-truncate{{/if}}{{#if sticky}} {{@root.prefix}}--data-table--sticky-header{{/if}}{{#if zebra}} {{@root.prefix}}--data-table--zebra{{/if}}{{#if small}} {{@root.prefix}}--data-table--compact{{/if}}{{#if tall}} {{@root.prefix}}--data-table--tall{{/if}}{{#if sort}} {{@root.prefix}}--data-table--sort{{/if}}{{#if displayOverflowMenus}} {{@root.prefix}}--data-table--visible-overflow-menu{{/if}} {{#if short}}{{@root.prefix}}--data-table--short{{/if}} {{#if static}}{{@root.prefix}}--data-table--static{{/if}}" >
    <thead>
      <tr>
        {{#each columns}}
          <th {{#if checkbox}} class="{{@root.prefix}}--table-column-checkbox" {{/if}}{{#if section}}class="{{@root.prefix}}--table-expand"{{/if}} {{#if numerical}} class="{{@root.prefix}}--data-table--numerical-cell"{{/if}} {{#if section}} data-event="expandAll"{{/if}}>
            <!-- checkbox th -->
            {{#if checkbox}}
              <input data-event="select-all" id="{{checkboxId}}" class="{{@root.prefix}}--checkbox" type="checkbox" value="{{checkboxValue}}" name="{{checkboxName}}">
              <label for="{{checkboxId}}" class="{{@root.prefix}}--checkbox-label" aria-label="{{title}}"></label>
            {{else if (and section ../hasExpandAll)}}
              <button class="{{@root.prefix}}--table-expand__button">
                {{ carbon-icon 'ChevronRight16' class=(add @root.prefix '--table-expand__svg') }}
              </button>
            {{else if (not menu)}}
            <!-- sortable th  -->
              {{#if sortable}}
                <button class="{{@root.prefix}}--table-sort" data-event="sort" title="{{title}}">
                  <span class="{{@root.prefix}}--table-header-label">{{title}}</span>
                  {{carbon-icon 'ArrowDown16' class=(add @root.prefix '--table-sort__icon')}}
                  {{carbon-icon 'Arrows16' class=(add @root.prefix '--table-sort__icon-unsorted')}}
                  {{#if ../truncate}}
                    <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{@root.prefix}}--tooltip" data-avoid-focus-on-open>
                      <span class="{{@root.prefix}}--tooltip__caret"></span>
                      <p class="{{@root.prefix}}--tooltip__text">{{title}}</p>
                    </div>
                  {{/if}}
                </button>
              <!-- no sort th -->
                {{else if small}}
                  {{title}}
                {{else}}
                  <span class="{{@root.prefix}}--table-header-label">{{title}}</span>
                {{/if}}
              {{/if}}
          </th>
        {{/each}}
      </tr>
    </thead>
  <tbody>
    {{#each rows as |row|}}
      <!-- the first cell of each row is a th[scope="row"], otherwise it is a td -->
      <tr{{#if row.sectionContent}} class="{{@root.prefix}}--parent-row" data-parent-row {{/if}} {{#if row.disabled}} class="{{@root.prefix}}--row-disabled" {{/if}}>
        {{#each ../columns as |column index|}}
          {{#with (lookup row column.name) as |data|}}
            {{#if @first }}
              <th {{#if column.numerical}} class="{{@root.prefix}}--data-table--numerical-cell" {{/if}} scope="row">
                <!-- truncated new markup -->
                {{#if ../../truncate}}
                  <span class="{{@root.prefix}}--table-cell-content" aria-describedby="label-tooltip">{{data}}
                      {{#if ../../../tall }}
                        {{#if (and row.secondaryText column.secondary)}}
                        <div class="{{@root.prefix}}--data-table--cell-secondary-text">
                          {{row.secondaryText}}
                        </div>
                        {{/if}}
                      {{/if}}
                    </span>
                  <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{@root.prefix}}--tooltip" data-avoid-focus-on-open>
                    <span class="{{@root.prefix}}--tooltip__caret"></span>
                    <p class="{{@root.prefix}}--tooltip__text">{{data}}</p>
                  </div>
                <!-- default (non truncated) -->
                {{else}}
                  {{data}}
                  {{#if ../../../tall}}
                    {{#if (and row.secondaryText column.secondary)}}
                    <div class="{{@root.prefix}}--data-table--cell-secondary-text">
                      {{row.secondaryText}}
                    </div>
                    {{/if}}
                  {{/if}}
                {{/if}}
              </th>
            {{else}}
              <td {{#if column.numerical}} class="{{@root.prefix}}--data-table--numerical-cell" {{/if}}>
                <!-- truncated new markup -->
                {{#if ../../truncate}}
                  <span class="{{@root.prefix}}--table-cell-content" aria-describedby="label-tooltip">{{data}}
                      {{#if ../../../tall }}
                        {{#if (and row.secondaryText column.secondary)}}
                        <div class="{{@root.prefix}}--data-table--cell-secondary-text">
                          {{row.secondaryText}}
                        </div>
                        {{/if}}
                      {{/if}}
                    </span>
                  <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{@root.prefix}}--tooltip" data-avoid-focus-on-open>
                    <span class="{{@root.prefix}}--tooltip__caret"></span>
                    <p class="{{@root.prefix}}--tooltip__text">{{data}}</p>
                  </div>
                <!-- default (non truncated) -->
                {{else}}
                  {{data}}
                  {{#if ../../../tall}}
                    {{#if (and row.secondaryText column.secondary)}}
                    <div class="{{@root.prefix}}--data-table--cell-secondary-text">
                      {{row.secondaryText}}
                    </div>
                    {{/if}}
                  {{/if}}
                {{/if}}
              </td>
            {{/if}}
          {{/with}}
        {{/each}}
      </tr>
      <!-- Expandable child row -->
      {{#if row.sectionContent}}
          <tr class="{{@root.prefix}}--expandable-row {{@root.prefix}}--expandable-row--hidden" data-child-row>
            <td colspan="{{../columns.length}}">
              <div class="{{@root.prefix}}--child-row-inner-container">
                {{{row.sectionContent}}}
              </div>
            </td>
          </tr>
        {{/if}}
      {{/each}}
    </tbody>
  </table>
  {{#if sticky}}
  </section>
  {{/if}}

 {{#if (not small)}}</div>{{/if}}

{% endcomment %}