<!--
  Copyright IBM Corp. 2016, 2018

  This source code is licensed under the Apache-2.0 license found in the
  LICENSE file in the root directory of this source tree.
-->
<!-- v10 Data Table -->
{% if hasToolbar %}
  <div class="{{ root.prefix }}--data-table-container {% if sticky %}{{ root.prefix }}--data-table--max-width{% endif %}" data-table{% if hasExpandAll %} data-table-demo-expand-all-manager{% endif %}>
    <div class="{{ root.prefix }}--data-table-header">
      <h4 class="{{ root.prefix }}--data-table-header__title">{{ title }}</h4>
      <p class="{{ root.prefix }}--data-table-header__description">{{ optionalHelper }}</p>
    </div>
    <!-- Toolbar Content -->
    <section class="{{ root.prefix }}--table-toolbar {% if small %} {{ root.prefix }}--table-toolbar--small {% endif %}">
      {% if batchActions %}
      <!-- Batch actions -->
      <div class="{{ root.prefix }}--batch-actions" aria-label="Table Action Bar">
          <div class="{{ root.prefix }}--action-list">
            <button class="{{ root.prefix }}--btn {{ root.prefix }}--btn--primary{% if small %} {{ root.prefix }}--btn--sm{% endif %}" type="button">
              Delete
              {{ carbon-icon }}
            </button>
            <button class="{{ root.prefix }}--btn {{ root.prefix }}--btn--primary{% if small %} {{ root.prefix }}--btn--sm{% endif %}" type="button">
              Save
              {{ carbon-icon }}
            </button>
            <button class="{{ root.prefix }}--btn {{ root.prefix }}--btn--primary{% if small %} {{ root.prefix }}--btn--sm{% endif %}" type="button">
              Download
              {{ carbon-icon }}
            </button>
            <button data-event="action-bar-cancel" class="{{ root.prefix }}--btn {{ root.prefix }}--btn--primary {{ root.prefix }}--batch-summary__cancel{% if small %} {{ root.prefix }}--btn--sm{% endif %}">{{ cancelLabel }}</button>
          </div>
        <div class="{{ root.prefix }}--batch-summary">
          <p class="{{ root.prefix }}--batch-summary__para">{{ selectedItemsCounterLabel|safe }}</p>
        </div>
      </div>
      {% endif %}

      {% if toolbarActions %}
     <div class="{{ root.prefix }}--toolbar-content">
          <!--  Default hidden search -->
         {{# is }}
           <div class="{{ root.prefix }}--toolbar-search-container-expandable">
             <div data-search class="{{ root.prefix }}--search {{ root.prefix }}--search--sm" role="search">
               <div class="{{ root.prefix }}--search-magnifier" tabindex="0">
                 {{ carbon-icon }}
               </div>
               <label id="{{ searchLabelId }}" class="{{ root.prefix }}--label" for="{{ searchInputId }}">{{ searchLabel }}</label>
                <input class="{{ root.prefix }}--search-input" type="text" id="{{ searchInputId }}" role="search" placeholder="{{ searchLabel }}" aria-labelledby="{{ searchLabelId }}">
                <button class="{{ root.prefix }}--search-close {{ root.prefix }}--search-close--hidden" title="{{ clearSearchLabel }}" aria-label="{{ clearSearchLabel }}">
                  {{ carbon-icon }}
                </button>
              </div>
            </div>
            {{/is}}

            <!-- Persistent Search -->
            {{# is }}
            <div class="{{ root.prefix }}--toolbar-search-container-persistent">
              <div data-search class="{{ root.prefix }}--search {{ root.prefix }}--search--sm" role="search">
                <div class="{{ root.prefix }}--search-magnifier">
                  {{ carbon-icon }}
                </div>
                <label id="{{ searchLabelId }}" class="{{ root.prefix }}--label" for="{{ searchInputId }}">{{ searchLabel }}</label>
                <input class="{{ root.prefix }}--search-input" type="text" id="{{ searchInputId }}" role="search" placeholder="{{ searchLabel }}" aria-labelledby="{{ searchLabelId }}">
                <button class="{{ root.prefix }}--search-close {{ root.prefix }}--search-close--hidden" title="{{ clearSearchLabel }}" aria-label="{{ clearSearchLabel }}">
                  {{ carbon-icon }}
                </button>
              </div>
            </div>
            {{/is}}

            <!-- Toolbar Overflow Menu -->
            {% for toolbar in toolbarActionsX %}
            <div class="{{ toolbar.root,prefix }}--overflow-menu {{ toolbar.root,prefix }}--toolbar-action" data-overflow-menu role="button" tabindex="0" aria-label="Overflow" aria-haspopup="true"
              aria-expanded="false" {% if toolbar.disabled %} disabled {% endif %}>
              {{ toolbar.carbon-icon }}
              <ul class="{{ toolbar.root,prefix }}--overflow-menu-options {{ toolbar.root,prefix }}--overflow-menu--flip" tabindex="-1" role="menu" aria-label="Overflow" data-floating-menu-direction="bottom">
                {% for overflowItems_i in toolbar.overflowItems %}
                <li class="{{ overflowItems_i.root,prefix }}--overflow-menu-options__option {% if undefined %} {{ overflowItems_i.root,prefix }}--overflow-menu--data-table {% endif %}" role="presentation">
                  <button class="{{ overflowItems_i.root,prefix }}--overflow-menu-options__btn" role="menuitem" {% if overflowItems_i.primaryFocus %} data-floating-menu-primary-focus {% endif %}>
                    <div class="{{ overflowItems_i.root,prefix }}--overflow-menu-options__option-content">
                    {{ overflowItems_i.label }}
                    </div>
                  </button>
                </li>
                {% endfor %}
              </ul>
            </div>
            {% endfor %}

          <!--  Toolbar primary button -->
          <button class="{{ root.prefix }}--btn {{ root.prefix }}--btn--sm {{ root.prefix }}--btn--primary">
            {% if small %} Primary {% else %} Primary Button {% endif %}
            {{ carbon-icon }}
          </button>
      </div>
      {% endif %}
    </section>
  {% endif %}
  <!-- End Toolbar Content -->

  {% if sticky %}
  <section class="{{ root.prefix }}--data-table_inner-container">
  {% endif %}
  <!-- Table -->
  <table class="{{ root.prefix }}--data-table {% if truncate %}{{ root.prefix }}--data-table--overflow-truncate{% endif %}{% if sticky %} {{ root.prefix }}--data-table--sticky-header{% endif %}{% if zebra %} {{ root.prefix }}--data-table--zebra{% endif %}{% if small %} {{ root.prefix }}--data-table--compact{% endif %}{% if tall %} {{ root.prefix }}--data-table--tall{% endif %}{% if sort %} {{ root.prefix }}--data-table--sort{% endif %}{% if displayOverflowMenus %} {{ root.prefix }}--data-table--visible-overflow-menu{% endif %} {% if short %}{{ root.prefix }}--data-table--short{% endif %} {% if static %}{{ root.prefix }}--data-table--static{% endif %}" >
    <thead>
      <tr>
        {% for columns_i in columns %}
          <th {% if columns_i.checkbox %} class="{{ columns_i.root,prefix }}--table-column-checkbox"{% endif %}{% if columns_i.menu %} class="{{ columns_i.root,prefix }}--table-column-menu"{% endif %}{% if columns_i.section %} class="{{ columns_i.root,prefix }}--table-expand"{% endif %}{% if columns_i.numerical %} class="{{ columns_i.root,prefix }}--data-table--numerical-cell"{% endif %}{% if columns_i.section %} data-event="expandAll"{% endif %}>
            <!-- checkbox th -->
            {% if columns_i.checkbox %}
              <input data-event="select-all" id="{{ columns_i.checkboxId }}" class="{{ columns_i.root,prefix }}--checkbox" type="checkbox" value="{{ columns_i.checkboxValue }}" name="{{ columns_i.checkboxName }}">
              <label for="{{ columns_i.checkboxId }}" class="{{ columns_i.root,prefix }}--checkbox-label" aria-label="{{ columns_i.title }}"></label>
            {% elif undefined %}
              <button class="{{ columns_i.root,prefix }}--table-expand__button">
                {{ columns_i.carbon-icon }}
              </button>
            {% elif undefined %}
            <!-- sortable th  -->
              {% if columns_i.sortable %}
                <button class="{{ columns_i.root,prefix }}--table-sort" data-event="sort" title="{{ columns_i.title }}">
                  <span class="{{ columns_i.root,prefix }}--table-header-label">{{ columns_i.title }}</span>
                  {{ columns_i.carbon-icon }}
                  {{ columns_i.carbon-icon }}
                  {% if truncate %}
                    <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{ columns_i.root,prefix }}--tooltip" data-avoid-focus-on-open>
                      <span class="{{ columns_i.root,prefix }}--tooltip__caret"></span>
                      <p class="{{ columns_i.root,prefix }}--tooltip__text">{{ columns_i.title }}</p>
                    </div>
                  {% endif %}
                </button>
              <!-- no sort th -->
                {% elif columns_i.small %}
                  {{ columns_i.title }}
                {% else %}
                  <span class="{{ columns_i.root,prefix }}--table-header-label">{{ columns_i.title }}</span>
                {% endif %}
              {% endif %}
          </th>
        {% endfor %}
      </tr>
    </thead>
  <tbody>
    {% for row in rows %}
      <tr{% if row.sectionContent %} class="{{ row.root,prefix }}--parent-row" data-parent-row {% endif %} {% if row.disabled %} class="{{ row.root,prefix }}--row-disabled" {% endif %}>
        {% for column in columns %}
          {{# with }}
          <!-- expand icon td -->
            {% if column.section %}
              <td class="{{ column.root,prefix }}--table-expand" data-event="expand">
                <button class="{{ column.root,prefix }}--table-expand__button">
                  {{ column.carbon-icon }}
                </button>
              </td>
            <!-- checkbox td -->
            {% elif column.checkbox %}
              <td class="{{ column.root,prefix }}--table-column-checkbox">
                <input data-event="select" id="{{ column.data,id }}" class="{{ column.root,prefix }}--checkbox" type="checkbox" value="{{ column.data,value }}" name="{{ column.data,name }}" {% if row.disabled %} disabled {% endif %}>
                <label for="{{ column.data,id }}" class="{{ column.root,prefix }}--checkbox-label" aria-label="{{ column.data,label }}"></label>
              </td>
            <!-- inline action td's -->
            {% elif column.additionalIcons %}
              <td class="{{ column.root,prefix }}--table-column-icon">
                <button {% if row.disabled %} disabled {% endif %}>
                  {{ column.data,svg|safe }}
                </button>
              </td>
            <!-- overflow menu td -->
            {% elif column.menu %}
              <td class="{{ column.root,prefix }}--table-column-menu">
                <div data-overflow-menu role="menu" tabindex="0" aria-label="{{ column.data,label }}" class="{{ column.root,prefix }}--overflow-menu">
                  {{ column.carbon-icon }}
                  <ul class="{{ column.root,prefix }}--overflow-menu-options{% if column.data,flip %} {{ column.root,prefix }}--overflow-menu--flip{% endif %}">

                      <li class="{{ column.root,prefix }}--overflow-menu-options__option {{ column.root,prefix }}--table-row--menu-option">
                        <button class="{{ column.root,prefix }}--overflow-menu-options__btn" onclick="console.log('keyboard action')">
                          <div class="{{ column.root,prefix }}--overflow-menu-options__option-content">
                           {{ column.carbon-icon }} Edit
                          </div>
                        </button>
                      </li>
                      <li class="{{ column.root,prefix }}--overflow-menu-options__option {{ column.root,prefix }}--table-row--menu-option">
                        <button class="{{ column.root,prefix }}--overflow-menu-options__btn" onclick="console.log('keyboard action')">
                          <div class="{{ column.root,prefix }}--overflow-menu-options__option-content">
                            {{ column.carbon-icon }} Download
                          </div>
                        </button>
                      </li>
                      <li class="{{ column.root,prefix }}--overflow-menu-options__option {{ column.root,prefix }}--table-row--menu-option">
                        <button class="{{ column.root,prefix }}--overflow-menu-options__btn" onclick="console.log('keyboard action')">
                          <div class="{{ column.root,prefix }}--overflow-menu-options__option-content">
                            {{ column.carbon-icon }} Save
                          </div>
                        </button>
                      </li>
                      <li class="{{ column.root,prefix }}--overflow-menu-options__option {{ column.root,prefix }}--table-row--menu-option">
                        <button class="{{ column.root,prefix }}--overflow-menu-options__btn" onclick="console.log('keyboard action')">
                          <div class="{{ column.root,prefix }}--overflow-menu-options__option-content">
                            {{ column.carbon-icon }} Delete
                          </div>
                        </button>
                      </li>

                  </ul>
                </div>
              </td>
            <!-- inline edit tds -->
            {% elif undefined %}
              <td class="{{ column.root,prefix }}--data-table-cell--editable {{ column.root,prefix }}--data-table-cell--editing">
                <div class="{{ column.root,prefix }}--data-table__edit-field">
                  <label class="{{ column.root,prefix }}--label" for="edit-cell:{{ row.id }}:{{ column.name }}">Edit Name: {{ column.data }}</label>
                  <input type="text" class="{{ column.root,prefix }}--text-input" id="edit-cell:{{ row.id }}:{{ column.name }}" value="{{ column.data }}">
                </div>
                <div class="{{ column.root,prefix }}--data-table__edit-actions">
                  <button class="{{ column.root,prefix }}--btn {{ column.root,prefix }}--btn--secondary {{ column.root,prefix }}--btn--sm">{{ ??? }}</button>
                  <button class="{{ column.root,prefix }}--btn {{ column.root,prefix }}--btn--primary {{ column.root,prefix }}--btn--sm">{{ ??? }}</button>
                </div>
              </td>
            {% elif column.editable %}
              <td class="{{ column.root,prefix }}--data-table-cell--editable"><span class="{{ column.root,prefix }}--data-table-cell__content">{{ column.data }}</span></td>
            <!-- all other td's -->
            {% else %}
              <td {% if column.numerical %} class="{{ column.root,prefix }}--data-table--numerical-cell" {% endif %}>
                <!-- truncated new markup -->
                {% if truncate %}
                  <span class="{{ column.root,prefix }}--table-cell-content" aria-describedby="label-tooltip">{{ column.data }}
                      {% if ??? %}
                        {% if undefined %}
                        <div class="{{ column.root,prefix }}--data-table--cell-secondary-text">
                          {{ row.secondaryText }}
                        </div>
                        {% endif %}
                      {% endif %}
                    </span>
                  <div id="label-tooltip" role="tooltip" data-floating-menu-direction="bottom" class="{{ column.root,prefix }}--tooltip" data-avoid-focus-on-open>
                    <span class="{{ column.root,prefix }}--tooltip__caret"></span>
                    <p class="{{ column.root,prefix }}--tooltip__text">{{ column.data }}</p>
                  </div>
                <!-- default (non truncated) -->
                {% else %}
                  {{ column.data }}
                  {% if ??? %}
                    {% if undefined %}
                    <div class="{{ column.root,prefix }}--data-table--cell-secondary-text">
                      {{ row.secondaryText }}
                    </div>
                    {% endif %}
                  {% endif %}
                {% endif %}
              </td>
            {% endif %}
          {{/with}}
        {% endfor %}
      </tr>
      <!-- Expandable child row -->
      {% if row.sectionContent %}
          <tr class="{{ row.root,prefix }}--expandable-row {{ row.root,prefix }}--expandable-row--hidden" data-child-row>
            <td colspan="{{ columns.length }}">
              <div class="{{ row.root,prefix }}--child-row-inner-container">
                {{ row.sectionContent|safe }}
              </div>
            </td>
          </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
  {% if sticky %}
  </section>
  {% endif %}

  <!-- Pagination -->
  {% if hasPager %}
  <div class="{{ root.prefix }}--pagination" data-pagination>
    <div class="{{ root.prefix }}--pagination__left">
      <label
         id="select-id-pagination-count-label"
         class="{{ root.prefix }}--pagination__text"
         for="select-id-pagination-count"
       >
         Items per page:
       </label>
       <div class="{{ root.prefix }}--select {{ root.prefix }}--select--inline {{ root.prefix }}--select__item-count">
         <select
           class="{{ root.prefix }}--select-input"
           id="select-id-pagination-count"
           aria-label="select number of items per page"
           tabindex="0"
           data-items-per-page
         >
           <option class="{{ root.prefix }}--select-option" value="10" selected>10</option>
           <option class="{{ root.prefix }}--select-option" value="20">20</option>
           <option class="{{ root.prefix }}--select-option" value="30">30</option>
           <option class="{{ root.prefix }}--select-option" value="40">40</option>
           <option class="{{ root.prefix }}--select-option" value="50">50</option>
         </select>
         {{ carbon-icon }}
      </div>
      <span class="{{ root.prefix }}--pagination__text">
         <span data-displayed-item-range>1-10</span> of
         <span data-total-items>50</span> items
      </span>
    </div>
    <div class="{{ root.prefix }}--pagination__right">
       <div class="{{ root.prefix }}--select {{ root.prefix }}--select--inline {{ root.prefix }}--select__page-number">
         <select
           class="{{ root.prefix }}--select-input"
           id="select-id-pagination-page"
           aria-label="select page number to view"
           tabindex="0"
           data-page-number-input
         >
           <option class="{{ root.prefix }}--select-option" value="1" selected>1</option>
           <option class="{{ root.prefix }}--select-option" value="2">2</option>
           <option class="{{ root.prefix }}--select-option" value="3">3</option>
           <option class="{{ root.prefix }}--select-option" value="4">4</option>
           <option class="{{ root.prefix }}--select-option" value="5">5</option>
         </select>
         {{ carbon-icon }}
       </div>
       <label
        id="select-id-pagination-page-label"
        class="{{ root.prefix }}--pagination__text"
        for="select-id-pagination-page"
      >
        of 5 pages
      </label>
      <button class="{{ root.prefix }}--pagination__button {{ root.prefix }}--pagination__button--backward" tabindex="0" data-page-backward aria-label="Backward button">
        {{ carbon-icon }}
      </button>
      <button class="{{ root.prefix }}--pagination__button {{ root.prefix }}--pagination__button--forward" tabindex="0" data-page-forward aria-label="Forward button">
        {{ carbon-icon }}
      </button>
    </div>
  </div>
  {% endif %}
{% if undefined %}</div>{% endif %}
