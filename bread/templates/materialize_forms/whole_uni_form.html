{% load crispy_forms_utils %}

{% specialspaceless %}
{% if form_tag %}<form {{ flat_attrs|safe }} method="{{ form_method }}" {% if form.is_multipart %} enctype="multipart/form-data"{% endif %} autocomplete="off">{% endif %}
    {% if form_method|lower == "post" and not disable_csrf %}
        {% csrf_token %}
    {% endif %}

    {% include "materialize_forms/display_form.html" %}

    {% if inputs %}
    <div class="row" style="margin-top: 2rem">
        <div class="col s12">
            <div style="display: flex; justify-content: space-between; flex-direction: row-reverse">
                {% for input in inputs %}
                    {% if "%s" in input.template %}
                        {% with input.template|slice:"1:" as templatevalue %}
                            {% include "materialize_forms"|stringformat:templatevalue %}
                        {% endwith %}
                    {% elif input.name != "quicksave" %}
                        {% include input.template %}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% for input in inputs %}
        {% if input.name == "quicksave" %}
            {% include input.template %}
        {% endif %}
    {% endfor %}
    {% endif %}
{% if form_tag %}</form>{% endif %}
{% endspecialspaceless %}
